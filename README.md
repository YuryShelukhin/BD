# Домашнее задание к занятию «Базы данных, их типы» Шелухин Юрий

### Задание 1. СУБД

### Кейс
Крупная строительная компания, которая также занимается проектированием и девелопментом, решила создать 
правильную архитектуру для работы с данными. Ниже представлены задачи, которые необходимо решить для
каждой предметной области. 

Какие типы СУБД, на ваш взгляд, лучше всего подойдут для решения этих задач и почему? 
 
1.1. Бюджетирование проектов с дальнейшим формированием финансовых аналитических отчётов и прогнозирования рисков.
СУБД должна гарантировать целостность и чёткую структуру данных.

1.1.* Хеширование стало занимать длительно время, какое API можно использовать для ускорения работы? 

1.2. Под каждый девелоперский проект создаётся отдельный лендинг, и все данные по лидам стекаются в CRM к 
маркетологам и менеджерам по продажам. Какой тип СУБД лучше использовать для лендингов и для CRM? 
СУБД должны быть гибкими и быстрыми.

1.2.* Можно ли эту задачу закрыть одной СУБД? И если да, то какой именно СУБД и какой реализацией?

1.3. Отдел контроля качества решил создать базу по корпоративным нормам и правилам, обучающему материалу 
и так далее, сформированную согласно структуре компании. СУБД должна иметь простую и понятную структуру.

1.3.* Можно ли под эту задачу использовать уже существующую СУБД из задач выше и если да, то как лучше это 
реализовать?

1.4. Департамент логистики нуждается в решении задач по быстрому формированию маршрутов доставки материалов 
по объектам и распределению курьеров по маршрутам с доставкой документов. СУБД должна уметь быстро работать
со связями.

1.4.* Можно ли к этой СУБД подключить отдел закупок или для них лучше сформировать свою СУБД в связке с СУБД 
логистов?

1.5.* Можно ли все перечисленные выше задачи решить, используя одну СУБД? Если да, то какую именно?

*Приведите ответ в свободной форме.*

---

## Решение 1

1.1.  Для эфеективной работы с бизнес-аналитикой с высокими объемами данных эфекктивно использовать OLAP базы данных, импользующие многомерные кубы для упорядочивания данных. Такими СУБД являются - Microsoft SQL Server Analysis Services (SSAS), SAP MDX, отечественные  Modus BI, ALPHA OLAP и др.  
1.1*. Выбор API для ускорения кэширования базы данных зависит от конкретных задач и требований приложения. Например:
- Memcached. Подходит для распределённого простого кэширования по типу key-value с высокой пропускной способностью. Подходит для кэширования простых строковых данных, если сброс кэша в случае перезагрузки сервера не критичен.
- Redis. Проект структуры данных в памяти, который реализует распределённую базу данных ключей-значений. Подходит для сложных ситуаций с хранением разных типов данных и необходимостью повышать отказоустойчивость. Например, для кэширования пользовательских сессий или результатов запросов к API.
-  Couchbase. База данных NoSQL, которая также может быть использована для кэширования. Предлагает возможности распределённого кэширования. Подходит для использования в качестве интегрированной базы данных NoSQL и как решения для кэширования.
-  JCache (JSR-107). Стандартный API для кэширования в Java. Обеспечивает интеграцию с провайдерами кэширования, соответствующими стандарту JSR-107. 
-   AWS ElastiCache, Microsoft Azure Cache for Redis и Google Cloud Memorystore. Варианты для использования в облачных средах.   
1.2. Для лендингов и для CRM  лучше использовать реляционные СУБД, например Postgres.  
1.2*. Выбор универсальной СУБД это всегда компромисс, для некоторых задач использование такой базы будет неэффективным или затруднительным. Но при необходимости такого выбора следует использовать одну их реляционных баз.  
1.3. Для хранения документов следует выбрать NOSQL базу документо-ориентированного типа, например MongoDB.  
1.3*. В OLAP базе документы хранить нельзя, так как она колонкоориентированная модель. SQL базы позволяют хранить документы и даже фотографии в бинарном коде, однако это требует дополнительного кофигурирования настроек для использования типа данных BLOB.  
1.4. Высокую производительность для обработки логиситческой информации показывают графовые базы.  
1.4*. Для SRM-систем  используют SQL и NOSQL базы данных. Вместе с тем встречаются варианты применения графовых баз, в которых настраивают связи между данными.  Напрмер, комплесное решение ComindWare.  
1.5*. При выборе универсальной СУБД, можно обратить вниманте на мультимодельные базы, например Azure CosmosDB или другие, сочетающие в т.ч. реляционную базу. Несмотря на экономию денежных средств на покупку ПО и его обслуживание, имеются недостатки мультимодельности в ограниченности возможностей СУБД. 

---

### Задание 2. Транзакции

2.1. Пользователь пополняет баланс счёта телефона, распишите пошагово, какие действия должны произойти для того, чтобы 
транзакция завершилась успешно. Ориентируйтесь на шесть действий.

2.1.* Какие действия должны произойти, если пополнение счёта телефона происходило бы через автоплатёж?

*Приведите ответ в свободной форме.*

---

## Решение 2.

2.1 Пополнение счета через транзакцию (для удобства понимания часть действий разделены):
- открытие приложения;
- выбор получателя денег(сотового оператора), суммы, подтверждение; 
- проверка в платежной системе;
- проверка в банке-эквайере (куда поступят деньги), получение ответа;
- проверка информации в банке-эмитент (откуда поступят деньги), получение ответа на возможность перевода (пароль, отсуствие блокировки, наличие денег);
- передача информации из банка эмитента в платежную систему; 
- передача информации из платежной системы в банк-эквайер;
- увеличение суммы на счету в банке-эквайере;
- обратная передача информации в банк эмитент об удачном завершении транзакции; 
- снижение суммы на счету в банке-эмитенте, отображение перевода в интерфейсе приложения.

2.1*. Для автоплатежа.
- настройка  задачи (включение автоплатежа, получатель, сумма, счет, периодичность и т.д.) в планировщике, обслуживающем счет, через платежное приложение или иным  способом на запрос информации в банке-эквайере или направление заявки в банк-эквайер на самостоятельное оповещение;
- срабатывание определенного тригера при работе планировщика (снижение баланса) или  автоматисеское направление информации от банка-эквайера  о снижении суммы на счете; 
- проверка в платежной системе;
- проверка в банке-эквайере (куда поступят деньги), получение ответа;
- проверка информации в банке-эмитент (откуда поступят деньги), получение ответа на возможность перевода (пароль, отсуствие блокировки, наличие денег);
- передача информации из банка-эмитента в платежную систему; 
- передача информации из платежной системы в банк-эквайер;
- увеличение суммы на счету в банке-эквайере;
- обратная передача информации в банк-эмитент об удачном завершении транзакции; 
- снижение суммы на счету в банке-эмитенте, отображение перевода в интерфейсе приложения.

---

### Задание 3. SQL vs NoSQL

3.1. Напишите пять преимуществ SQL-систем по отношению к NoSQL. 
3.1.* Какие, на ваш взгляд, преимущества у NewSQL систем перед SQL и NoSQL.

*Приведите ответ в свободной форме.*

---

## Решение 3.

3.1. преимуществ SQL-систем по отношению к NoSQL:
- универсальность и стандартизация;
- простота;
- безопасность запросов, наличие транзакционности;
- совместный доступ, управление доступом;
- более развитое индексирование.

3.1* Преимущества у NewSQL систем перед SQL и NoSQL
- высокая согласованность;
- масштабируемость;
- управление параллелизмом;
- совместимость с SQL;
- высокая скорость (х50).

---

### Задание 4. Кластеры

Необходимо производить большое количество вычислений при работе с огромным количеством данных, под эту задачу выделено 1000 машин. 
На основе какого критерия будете выбирать тип СУБД и какая модель *распределённых вычислений* здесь справится лучше всего и почему?

---

## Решение 4.
Критерии выбора типа СУБД:
- Если нужны структурированные данные и транзакции, то реляционные СУБД (SQL). Если нужно хранить JSON, то документо-ориентированные (NoSQL); 
- Производительность. Для OLTP (транзакционных) операций лучше использовать реляционные СУБД, для OLAP (аналитических) – специализированные; 
- Масштабируемостью. Если нужно масштабировать базу данных, то можно использовать распределенные СУБД, такие как Cassandra или MongoDB; 
- Отказоустойчивость. Для обеспечения отказоустойчивости можно использовать репликацию; 
- Стоимость.

Для распределенных вычислений в кластере наиболее распространённой и эффективной моделью является MapReduce, предназначенная для обработки больших объемов данных, особенно в рамках Big Data, и часто используется в компьютерных кластерах.  
Она позволяет параллельно обрабатывать данные, разделяя вычисления между множеством серверов.  
Программы, использующие MapReduce, автоматически распараллеливаются и исполняются на распределенных узлах кластера.

---

